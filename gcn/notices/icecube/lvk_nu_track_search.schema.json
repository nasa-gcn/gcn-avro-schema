{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://gcn.nasa.gov/schema/main/gcn/notices/icecube/lvk_nu_track_search.schema.json",
  "title": "IceCube LVK Alert Nu Track Search",
  "description": "IceCube LVK Coincident Neutrino Track Search",
  "type": "object",
  "allOf": [
    {
      "description": "Alert information (alert_datetime and alert_type) from LVK alert notices",
      "$ref": "../core/Alert.schema.json"
    },
    {
      "description": "ID (ref_ID) of LVK alert notice",
      "$ref": "../core/FollowUp.schema.json"
    },
    {
      "$ref": "../core/AdditionalInfo.schema.json"
    },
    {
      "description": "Record/Sequence number of LVK alerts",
      "$ref": "../core/Reporter.schema.json"
    },
    {
      "$ref": "../core/DateTime.schema.json"
    }
  ],
  "properties": {
    "coincident_events": {
      "description": "An array of summary of information for each coincident neutrino track event",
      "type": "array",
      "items": {
        "$ref": "#/$defs/coincevent"
      }
    },
    "most_probable_direction": {
      "description": "Most likely source direction based on all coincident events and GW localizations",
      "$ref": "../core/Localization.schema.json"
    },
    "n_events_coincident": {
      "description": "Number of IceCube events in spatial and temporal coincidence with the GW map",
      "type": "number"
    },
    "neutrino_flux_sensitivity_range": {
      "description": "Time integrated flux sensitivity ranges assuming an E^-2 spectrum (E^2 dN/dE) within the GW map localization",
      "$ref": "#/$defs/fluxlimits"
    },
    "pval_bayesian": {
      "description": "P-value from LLAMA Bayesian search; consistency with background expectations [0-1]",
      "type": [
        "number",
        "null"
      ]
    },
    "pval_generic": {
      "description": "P-value from generic transient search; consistency with background expectations [0-1]",
      "type": [
        "number",
        "null"
      ]
    }
  },
  "$defs": {
    "coincevent": {
      "type": "object",
      "allOf": [
        {
          "$ref": "../core/Localization.schema.json"
        }
      ],
      "properties": {
        "event_dt": {
          "description": "Time difference between LVK alert time and neutrino candidate [sec]",
          "type": "number"
        },
        "event_pval_bayesian": {
          "description": "Per-event P-value from LLAMA Bayesian search; consistency with background expectations [0-1]",
          "type": [
            "number",
            "null"
          ]
        },
        "event_pval_generic": {
          "description": "Per-event P-value from generic transient search; consistency with background expectations [0-1]",
          "type": [
            "number",
            "null"
          ]
        }
      }
    },
    "fluxlimits": {
      "type": "object",
      "properties": {
        "flux_sensitivity": {
          "description": "Time integrated flux sensitivity range (min, max) [GeV cm^-2] assuming an E^-2 spectrum (E^2 dN/dE) found within the 90% region of GW map localization",
          "type": "array",
          "items": {
            "type": "number"
          }
        },
        "sensitive_energy_range": {
          "description": "Energy sensitivity range (lower, upper) [GeV] assuming an E^-2 spectrum (E^2 dN/dE)",
          "type": "array",
          "items": {
            "type": "number"
          }
        }
      }
    }
  }
}
